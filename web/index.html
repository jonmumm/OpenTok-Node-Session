<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
	"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>OpenTok Node.js</title>
	
	<script src="/socket.io/socket.io.js" type="text/javascript"></script>
	<script src="http://jonmumm.github.com/OpenTok-JS-LayoutContainer/OT_LayoutContainer.js" type="text/javascript"></script>
	<script src="http://staging.tokbox.com/v0.91/js/TB.min.js" type="text/javascript" ></script>
	<script src="OT_Widget.js" type="text/javascript" ></script>
	
	<script>
		// Initialize the socket, set up event handler, and connect
		// var socket = new io.Socket(null, {port: 3001, rememberTransport: false});
		var socket = io.connect('http://localhost');
		socket.on("opentok_info", messageHandler);
		
		function messageHandler (message) {	
			var opentok_info = message;
			console.log(opentok_info);
			OT_Widget.startWidget("widgetContainer", 700, 400, opentok_info.apiKey, opentok_info.sessionId, opentok_info.token);
		}
	</script>
</head>

<body>
	<div id="widgetContainer"></div>
</body>
</html>
